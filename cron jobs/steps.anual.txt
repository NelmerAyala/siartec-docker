Configuración del Cron:
Acceder al Crontab:

Abre el archivo de tareas programadas con el siguiente comando:

bash
Copiar código
crontab -e
Agregar la Tarea al Crontab:

Agrega la siguiente línea al archivo de crontab para ejecutar la tarea el 1 de enero de cada año a la medianoche:

bash
Copiar código
0 0 1 1 * psql -U tu_usuario -d tu_base_de_datos -c "SELECT reset_sequence('nombre_de_la_secuencia');"
Desglose de la Línea de Cron:
0 0 1 1 *: Esto especifica que la tarea debe ejecutarse a la medianoche (00:00 horas) del 1 de enero de cada año.

0 0: Minuto y hora.
1 1: Día del mes y mes (1 de enero).
*: Cualquier día de la semana (ignorado en este caso, ya que hemos especificado una fecha exacta).
psql: Cliente de línea de comandos de PostgreSQL.

-U tu_usuario: Especifica el usuario de PostgreSQL que ejecutará el comando.

-d tu_base_de_datos: Indica la base de datos a la que te estás conectando.

-c "SELECT reset_sequence('nombre_de_la_secuencia');": Ejecuta el comando SQL para llamar a la función reset_sequence con el nombre de la secuencia que deseas reiniciar.

Consideraciones:
Variables de Entorno: Si necesitas manejar contraseñas, puedes usar la variable de entorno PGPASSWORD o el archivo .pgpass para pasar las credenciales de manera segura.

Permisos: Asegúrate de que el usuario que ejecuta esta tarea tenga los permisos adecuados en PostgreSQL para ejecutar la función que reinicia la secuencia.

Pruebas: Considera probar el comando manualmente antes de depender de cron para asegurarte de que todo esté configurado correctamente.

Ejemplo usando un Script:
Si prefieres usar un script para gestionar todo lo relacionado con la conexión y reinicio, podrías crear un archivo de script similar al siguiente, y llamarlo desde cron:

bash
Copiar código
#!/bin/bash

# Configurar la variable de entorno para la contraseña
export PGPASSWORD='tu_contraseña'

# Ejecutar el comando para reiniciar la secuencia
psql -U tu_usuario -d tu_base_de_datos -c "SELECT reset_sequence('nombre_de_la_secuencia');"

# Quitar la variable de entorno por seguridad
unset PGPASSWORD
Asigue el permiso ejecutable al script:

bash
Copiar código
chmod +x /ruta/a/tu/script/reset_sequence_annual.sh
Luego, en crontab, usas:

bash
Copiar código
0 0 1 1 * /ruta/a/tu/script/reset_sequence_annual.sh
Este enfoque con scripts te ofrece un control más fino sobre la ejecución y la gestión de errores, especialmente si deseas añadir más lógica en el futuro